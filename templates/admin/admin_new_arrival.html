{% extends 'base.html' %}
{% load static %}

{% block title %}Archive Registry â€” Cantus{% endblock %}

{% block content %}

<script src="https://unpkg.com/htmx.org@1.9.10"></script>

<section class="bg-[#f4f4f2] min-h-screen pb-32 pt-12 px-4 lg:px-10">

    <div class="max-w-[1800px] mx-auto mb-12 flex flex-col md:flex-row justify-between gap-6">
        <div>
            <nav class="flex items-center gap-3 text-[9px] uppercase tracking-[0.3em] font-black text-slate-400 mb-4">
                <a href="/" class="hover:text-indigo-600">Cantus</a>
                <span>/</span>
                <span class="text-slate-900">Archive Management</span>
            </nav>
            <h2 class="serif text-3xl text-slate-900">Catalog & Library Management</h2>
        </div>

        <div class="w-full md:w-1/3 group border-b border-slate-400 focus-within:border-slate-950 transition-all py-2 flex items-center gap-4">
            <svg class="w-4 h-4 text-slate-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
            <input type="text" name="q" id="songSearch" 
                hx-get="{% url 'admin_arrivals' %}" 
                hx-target="#adminsongsGrid" 
                hx-swap="outerHTML"
                hx-trigger="keyup changed delay:500ms"
                hx-indicator=".htmx-indicator"
                placeholder="Search Title or Composer..." 
                class="bg-transparent border-none outline-none text-sm w-full text-slate-900 placeholder:text-slate-500">
        </div>
        
        <div class="flex items-center gap-4">
            <span class="text-[10px] font-mono text-slate-600 bg-white border border-slate-100 px-4 py-2">
                TOTAL: {{ songs.count }} ENTRIES
            </span>
            <!-- <a href="{% url 'upload_song' %}" class="group flex items-center gap-4 bg-indigo-600 text-white px-3 py-1.5 text-xs pl-8 pr-2 rounded-xl uppercase tracking-[0.2em] font-black hover:bg-indigo-700 transition-all duration-500">
                New Score
                <div class="w-10 h-10 bg-white/10 flex items-center justify-center rounded-xl group-hover:bg-white/20">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M12 4v16m8-8H4" stroke-width="2.5"/></svg>
                </div>
            </a> -->
        </div>
    </div>
    <div>
        {% include 'admin/partials/song_grid.html' %}
    </div>
    
</section>

<script>
function confirmDelete(slug) {
    if(confirm('SECURITY WARNING: Proceeding will permanently purge this manuscript and all associated high-resolution assets from the UCM server. Continue?')) {
        window.location.href = `/music-scores/${slug}/delete/`;
    }
}
</script>


{% endblock %}